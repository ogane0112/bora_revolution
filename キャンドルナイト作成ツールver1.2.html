<!DOCTYPE html>
<html>
<head>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.3/html2pdf.bundle.js"></script>
</head>
<body>
  <div id="container" class="container"></div>

  <div class="color-options">
    <div class="color-option">
      <input type="radio" id="colorOption1" name="colorOption" value="#FF0000">
      <label for="colorOption1" style="background-color: #FF0000;"></label>
    </div>
    <div class="color-option">
      <input type="radio" id="colorOption2" name="colorOption" value="#00FF00">
      <label for="colorOption2" style="background-color: #00FF00;"></label>
    </div>
    <div class="color-option">
      <input type="radio" id="colorOption3" name="colorOption" value="#0000FF">
      <label for="colorOption3" style="background-color: #0000FF;"></label>
    </div>
    <div class="color-option">
      <input type="radio" id="colorOption4" name="colorOption" value="#1c200c">
      <label for="colorOption4" style="background-color: #1c200c;"></label>
    </div>
    <div class="color-option">
      <input type="radio" id="colorOption5" name="colorOption" value="#ff8300">
      <label for="colorOption5" style="background-color: #ff8300;"></label>
    </div>
    <div class="color-option">
      <input type="radio" id="colorOption6" name="colorOption" value="#dede96">
      <label for="colorOption6" style="background-color: #dede96;"></label>
    </div>
    <div class="color-option">
      <input type="radio" id="colorOption7" name="colorOption" value="#795b24">
      <label for="colorOption7" style="background-color: #795b24;"></label>
    </div>
    <div class="color-option">
      <input type="radio" id="colorOption8" name="colorOption" value="#d1dddf">
      <label for="colorOption8" style="background-color: #d1dddf;"></label>
    </div>
    <div class="color-option">
      <input type="radio" id="colorOption9" name="colorOption" value="#32b377">
      <label for="colorOption9" style="background-color: #32b377;"></label>
    </div>
    <div class="color-option">
      <input type="radio" id="colorOption10" name="colorOption" value="#008330">
      <label for="colorOption10" style="background-color: #008330;"></label>
    </div>
    <div class="color-option">
      <input type="radio" id="colorOption11" name="colorOption" value="#1adeb7">
      <label for="colorOption11" style="background-color: #1adeb7;"></label>
    </div>
    <div class="color-option">
      <input type="radio" id="colorOption12" name="colorOption" value="#65c530">
      <label for="colorOption12" style="background-color: #65c530;"></label>
    </div>
    <div class="color-option">
      <input type="radio" id="colorOption13" name="colorOption" value="#a4d45d">
      <label for="colorOption13" style="background-color: #a4d45d;"></label>
    </div>
    <div class="color-option">
      <input type="radio" id="colorOption14" name="colorOption" value="#008ca8">
      <label for="colorOption14" style="background-color: #008ca8;"></label>
    </div>
    <div class="color-option">
      <input type="radio" id="colorOption15" name="colorOption" value="#3b7ed5">
      <label for="colorOption15" style="background-color: #3b7ed5;"></label>
    </div>
    <div class="color-option">
      <input type="radio" id="colorOption16" name="colorOption" value="#075ddb">
      <label for="colorOption16" style="background-color: #075ddb;"></label>
    </div>
    <div class="color-option">
      <input type="radio" id="colorOption17" name="colorOption" value="#2d36c7">
      <label for="colorOption17" style="background-color: #2d36c7;"></label>
    </div>
    <div class="color-option">
        <input type="radio" id="colorOption18" name="colorOption" value="#00bfff">
        <label for="colorOption18" style="background-color: #00bfff;"></label>
      </div>
      <div class="color-option">
        <input type="radio" id="colorOption19" name="colorOption" value="#db7093">
        <label for="colorOption19" style="background-color: #db7093;"></label>
      </div>
      <div class="color-option">
        <input type="radio" id="colorOption20" name="colorOption" value="#ffff00">
        <label for="colorOption20" style="background-color: #ffff00;"></label>
      </div>
    <div class="color-option">
      <input type="radio" id="colorOption21" name="colorOption" value="#ffffff">
      <label for="colorOption21" style="background-color: #ffffff;"></label>
    </div>
  
  </div>

  <div class="color-count">
    <p>
        <span>赤: <span id="redCount">0</span></span>
        <span>緑: <span id="greenCount">0</span></span>
        <span>青: <span id="blueCount">0</span></span>
        <span>黒: <span id="blackCount">0</span></span>
        <span>オレンジ: <span id="OCount">0</span></span>
        <span>ゴールド: <span id="GCount">0</span></span>
        <span>茶色: <span id="tCount">0</span></span>
        <span>灰色: <span id="hCount">0</span></span>
        <span>三ツ矢: <span id="mituCount">0</span></span>
        <span>生茶: <span id="namaCount">0</span></span>
        <span>爽健美茶: <span id="soukenCount">0</span></span>
        <span>いろはす: <span id="irohasuCount">0</span></span>
        <span>おーいお茶: <span id="otyaCount">0</span></span>
    </p>
    <p>
        <span>やかん: <span id="yakanCount">0</span></span>
        <span>アクエリ: <span id="akuCount">0</span></span>
        <span>グリーンだから: <span id="dakaraCount">0</span></span>
        <span>サントリー＆紅茶花伝: <span id="skCount">0</span></span>
        <span>ネスカフェ: <span id="nsCount">0</span></span>
        <span>サントリピンク: <span id="spCount">0</span></span>
        <span>黄色: <span id="yCount">0</span></span>
        <span>白: <span id="whiteCount">8000</span></span>
    </p>
      </div>
    <button id="saveButton">保存</button>
    <button id="resetButton">リセット</button>
    <button onclick="generatePDF()">PDFにする</button>
    
      <style>
        p{
            line-height: 2;
            font-weight: 10;
            width: auto;
            
        }
        span{
            border-bottom:solid 1px #ff8300;
        }
        input{

        }
        .container {
          display: grid;
          grid-template-columns: repeat(var(--columns), 0fr);
        }
    
        .circle {
          width: 8px;
          height: 8px;
          border-radius: 50%;
          background-color: white;
          margin: -0.01px;
          margin-top: -0.02px;
          border: 0.2px solid black;
          cursor: pointer; /* カーソルをポインターに設定 */
        }
    
        .circle.active {
          background-color: var(--active-color); /* アクティブな色を設定 */
        }
    
        .circle.fill {
          background-color: var(--fill-color); /* 塗りつぶしの色を設定 */
        }
    
        /* 色の選択肢を表示する要素のスタイル */
        .color-options {
          margin-top:0px;
        }
    
        .color-option {
          display: inline-block;
          margin-right: 0px;
        }
    
        .color-option label {
          display: inline-block;
          width: 9px;
          height: 9px;
          border-radius: 50%;
          cursor: pointer;
        }
    
        .color-count {
          margin-top: 5px;
          font-weight: bold;
        }
      </style>
      <script>
        function createCircles(rows, columns) {
          const container = document.getElementById("container");
          const circles = [];
          const redCountElement = document.getElementById("redCount");
          const greenCountElement = document.getElementById("greenCount");
          const blueCountElement = document.getElementById("blueCount");
          const blackCountElement = document.getElementById("blackCount");
          const OCountElement = document.getElementById("OCount");
          const GCountElement = document.getElementById("GCount");
          const tCountElement = document.getElementById("tCount");
          const hCountElement = document.getElementById("hCount");
          const mituCountElement = document.getElementById("mituCount");
          const namaCountElement = document.getElementById("namaCount");
          const soukenCountElement = document.getElementById("soukenCount");
          const irohasuCountElement = document.getElementById("irohasuCount");
          const otyaCountElement = document.getElementById("otyaCount");
          const yakanCountElement = document.getElementById("yakanCount");
          const akuCountElement = document.getElementById("akuCount");
          const dakaraCountElement = document.getElementById("dakaraCount");
          const skCountElement = document.getElementById("skCount");
          const s = document.getElementById("spCount")
          const n = document.getElementById("nsCount")
          const h = document.getElementById("whiteCount")
          const k = document.getElementById("yCount")
          const saveButton = document.getElementById("saveButton");
    
          // CSSの変数を使って列数を指定
          container.style.setProperty("--columns", columns);
    
          // マルの数だけ要素を生成し、コンテナに追加する
          for (let i = 0; i < rows * columns; i++) {
            const circle = document.createElement("div");
            circle.classList.add("circle");
            circles.push(circle);
          }
    
          // マルの色を選択された色に変更する
          circles.forEach(function (circle, index) {
            // 行と列のインデックスを計算
            const row = Math.floor(index / columns);
            const column = index % columns;
    
            
    
            circle.addEventListener("click", function () {
              const selectedColorOption = document.querySelector(
                'input[name="colorOption"]:checked'
              );
              if (selectedColorOption) {
                const color = selectedColorOption.value;
                this.style.backgroundColor = color;
                updateColorCount();
              }
            });
            
        circle.addEventListener("mousedown", function (event) {
          isMouseDown = true;
          startCellIndex = index;
          const selectedColorOption = document.querySelector(
            'input[name="colorOption"]:checked'
          );
          if (selectedColorOption) {
            const color = selectedColorOption.value;
            this.style.backgroundColor = color;
            updateColorCount();
          }
        });

        circle.addEventListener("mouseup", function () {
          isMouseDown = false;
          startCellIndex = undefined;
        });

        circle.addEventListener("mousemove", function (event) {
          if (isMouseDown) {
            const selectedColorOption = document.querySelector(
              'input[name="colorOption"]:checked'
            );
            if (selectedColorOption) {
              const color = selectedColorOption.value;
              this.style.backgroundColor = color;
              updateColorCount();
            }
          }
        });
    
            // コンテナに追加
            container.appendChild(circle);
          });
    
          // カウントの更新
          // カウントの更新
function updateColorCount() {
  let redCount = 0;
  let greenCount = 0;
  let blueCount = 0;
  let blackCount = 0;
  let OCount = 0;
  let GCount = 0;
  let tCount = 0;
  let hCount = 0;
  let mituCount = 0;
  let namaCount = 0;
  let soukenCount = 0;
  let irohasuCount = 0;
  let otyaCount = 0;
  let yakanCount = 0;
  let akuCount = 0;
  let dakaraCount = 0;
  let skCount = 0;
  let nsCount = 0;
  let spCount = 0;
  let yCount = 0;
  let whiteCount = 8000;
  
  circles.forEach(function (circle) {
    const color = circle.style.backgroundColor;
    if (color === "rgb(255, 0, 0)" || color === "#FF0000") {
      redCount++;
      whiteCount=whiteCount-1;
    } else if (color === "rgb(0, 255, 0)" || color === "#00FF00") {
      greenCount++;
      whiteCount=whiteCount-1;
    } else if (color === "rgb(0, 0, 255)" || color === "#0000FF") {
      blueCount++;
      whiteCount=whiteCount-1;
    } else if (color === "rgb(28, 32, 12)" || color === "#1c200c") {
      blackCount++;
      whiteCount=whiteCount-1;
    } else if (color === "rgb(255, 131, 0)" || color === "#ff8300") {
      OCount++;
      whiteCount=whiteCount-1;
    } else if (color === "rgb(222, 222, 150)" || color === "#dede96") {
      GCount++;
      whiteCount=whiteCount-1;
    } else if (color === "rgb(121, 91, 36)" || color === "#795b24") {
      tCount++;
      whiteCount=whiteCount-1;
    } else if (color === "rgb(209, 221, 223)" || color === "#d1dddf") {
      hCount++;
      whiteCount=whiteCount-1;
    } else if (color === "rgb(50, 179, 119)" || color === "#32b377") {
      mituCount++;
      whiteCount=whiteCount-1;
    } else if (color === "rgb(0, 131, 48)" || color === "#008330") {
      namaCount++;
    } else if (color === "rgb(26, 222, 183)" || color === "#1adeb7") {
      soukenCount++;
      whiteCount=whiteCount-1;
    } else if (color === "rgb(101, 197, 48)" || color === "#a4d45d") {
      irohasuCount++;
      whiteCount=whiteCount-1;
    } else if (color === "rgb(164, 212, 93)" || color === "#008ca8") {
      otyaCount++;
      whiteCount=whiteCount-1;
    } else if (color === "rgb(0, 140, 168)" || color === "#3b7ed5") {
      yakanCount++;
      whiteCount=whiteCount-1;
    } else if (color === "rgb(59, 126, 213)" || color === "#075ddb") {
      akuCount++;
      whiteCount=whiteCount-1;
    } else if (color === "rgb(7, 93, 219)" || color === "#2d36c7") {
      dakaraCount++;
      whiteCount=whiteCount-1;
    } else if (color === "rgb(45, 54, 199)" || color === "#ffffff") {
      skCount++;
      whiteCount=whiteCount-1;
    }else if (color === "rgb(0, 191, 255)"){
        nsCount++;
        whiteCount=whiteCount-1;
    }else if (color === "rgb(219, 112, 147)"){
        spCount++;
        whiteCount=whiteCount-1;
    }else if (color ==="rgb(255, 255, 0)"){
      yCount++;
      whiteCount=whiteCount-1;
    }
    else if (color === "rgb(255, 255, 255)" && whiteCount < 2392){
        whiteCount++;
    }
  });

  redCountElement.textContent = redCount;
  greenCountElement.textContent = greenCount;
  blueCountElement.textContent = blueCount;
  blackCountElement.textContent = blackCount;
  OCountElement.textContent = OCount;
  GCountElement.textContent = GCount;
  tCountElement.textContent = tCount;
  hCountElement.textContent = hCount;
  mituCountElement.textContent = mituCount;
  namaCountElement.textContent = namaCount;
  soukenCountElement.textContent = soukenCount;
  irohasuCountElement.textContent = irohasuCount;
  otyaCountElement.textContent = otyaCount;
  yakanCountElement.textContent = yakanCount;
  akuCountElement.textContent = akuCount;
  dakaraCountElement.textContent = dakaraCount;
  skCountElement.textContent = skCount;
  s.textContent=spCount;
  n.textContent=nsCount;
  h.textContent=whiteCount;
  k.textContent =yCount;

}

         

  // 初回のカウント更新
  updateColorCount();

  // 保存ボタンクリック時の処理
  saveButton.addEventListener("click", function () {
    const savedData = {
      circles: [],
    };

    circles.forEach(function (circle) {
      savedData.circles.push(circle.style.backgroundColor);
    });

    // ローカルストレージにデータを保存
    localStorage.setItem("savedData", JSON.stringify(savedData));
    alert("データが保存されました。");
  });
  
  // リセットボタンクリック時の処理
  resetButton.addEventListener("click", function () {
    circles.forEach(function (circle) {
      circle.style.backgroundColor = "white";
    });
    updateColorCount();
    localStorage.removeItem("savedData");
    alert("データがリセットされました。");
  });

  // ページロード時に保存データを復元
  const savedDataJson = localStorage.getItem("savedData");
  if (savedDataJson) {
    const savedData = JSON.parse(savedDataJson);
    if (savedData && savedData.circles.length === circles.length) {
      circles.forEach(function (circle, index) {
        circle.style.backgroundColor = savedData.circles[index];
      });
      updateColorCount();
    }
  }
  
 


}
//pdfに変換する関数でライブラリをもちいている
function generatePDF() {
      const element = document.documentElement;
      const options = {
        filename: 'screenshot.pdf',
        image: { type: 'jpeg', quality: 0.98 },
        html2canvas: { scale: 6 },
        jsPDF: { unit: 'in', format: 'letter', orientation: "landscape" }
      };

      html2pdf().set(options).from(element).save();
    }
// 46行52列のマルを表示する場合
createCircles(80, 100);
</script>
</body>
</html>